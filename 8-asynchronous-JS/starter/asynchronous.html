<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
/*        
        function getRecipie(){
            setTimeout(()=>{
                const recId = [532,456,768,125]
                console.log(recId)
                
                setTimeout((id)=>{
                    const rec = {
                        title:'tomato pasta',
                        publisher:'Jonas'
                    };
                    console.log(`${id}: ${rec.title}`);
                    setTimeout(publisher=>{
                        const rec2 = {
                            title:'Pizza',
                            publisher: 'jnas'
                        }
                        console.log(rec2)
                    }, 1500, rec.publisher)
                }, 1000, recId[2])
            },1500)
            
        }
        
        getRecipie();*/
        
  /*      const getId = new Promise((resolve, reject)=>{
            setTimeout(()=>{
                resolve([532,456,768,125])
            },1500)
        })
        
        const getRec = recID =>{
            return new Promise((resolve,reject)=>{
                setTimeout( ID =>{
                    const rec = {
                        title:'tomato pasta',
                        publisher:'Jonas'
                    };
                    resolve(`${ID}: ${rec.title}`)
                },1500,recID)
        
            })
        }
        
        const getRel = publisher => {
            return new Promise((resolve,reject)=>{
                setTimeout(pub =>{
                        const rec2 = {
                            title:'Pizza',
                            publisher: 'jnas'
                        }
                        resolve(`${pub}: ${rec2.title}`)
                    
                },1500,publisher)
            })
        }*/
        
/*        getId.then(IDs=>{
            console.log(IDs)
            return getRec(IDs[2])
        }).then(rec =>{
            console.log(rec)
            return getRel('jnas')
        }).then(rec =>{
            console.log(rec)
        })
        
        .catch(error => {
            console.log('ERROR')
        })*/
        
//        async function getRecAW(){
//            const IDs = await getId;
//            console.log(IDs);
//            const recipe = await getRec(IDs[2]);
//            console.log(recipe);
//            const related = await getRel('jnas');
//            console.log(related)
//            
//            return recipe;
//        }
//
//        getRecAW().then(result => console.log(`${result} is best`));
        function getWet(woeid){
        fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`)
        .then(result =>{
            //console.log(result)
            return result.json()
        }).then(data=>{
            const today =data.consolidated_weather[0];
            console.log(`temp in ${data.title} bet ${today.min_temp} and ${today.max_temp}`)
        })
        
        .catch(error=>{console.log(error)})
        
        }
        
        getWet(2487956)
        getWet(44418)
        
        async function getWeather(woeid){
            try{
                const result = await fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`);
                const data = await result.json();
                const tom =data.consolidated_weather[1];
                console.log(`temp in ${data.title} bet ${tom.min_temp} and ${tom.max_temp}`)
                console.log(data)         
                return data;
            } catch(error){
                alert(error)
            }

            
        }
        let datLon ;
        getWeather(2487956).then(data=>{
            datLon = data;
             console.log(datLon);
        })
       
    </script>
</body>
</html>